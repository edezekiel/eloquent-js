<!DOCTYPE html>
<html>
    
    <body>
        <div>
            <h1>Heading with a <span>span</span> element.</h1>
            <p>A paragraph with <span>one</span>, <span>two</span>
              spans.</p>
        </div>

          <script>

            const flattenNode = (node) => {
                const arr = Array.from(node.childNodes);
                return arr.reduce(flatReducer, []);
            }

            const flatReducer = (accumulator, currentValue) => {
                return accumulator.concat(
                    (currentValue.nodeType === Node.ELEMENT_NODE  && (!!currentValue.childNodes)) ? 
                    [].concat(currentValue).concat(flattenNode(currentValue))
                    : currentValue
                )
            }
            
            const byTagName = (node, tagName) => {
                return flattenNode(node).filter(node => node.nodeName === tagName.toUpperCase());
            }
            
            console.log(byTagName(document.body.firstElementChild, "span"));
            //let flattened = flattenNode(document.body.firstElementChild);
            //console.log(flattened.forEach(node => console.log(node.nodeName === "H1")))

        </script>
    </body>

   
</html>



<!-- Steamroller approach to flatteing nested array -->
<!-- const steamrollNodes = node => {
    let nodeArray = node;
    if (!Array.isArray(node)){
        nodeArray = Array.from(node.childNodes);
    }
    return nodeArray.reduce(flatReducer, []);
}

function flatReducer (accumulator, currentValue) {
    console.log(`currentValue = ${currentValue}, currentValue.childNodes = ${currentValue.childNodes}, length = ${currentValue.childNodes.length}`);
    //console.log(accumulator, Array.isArray(Array.from(currentValue.childNodes)), currentValue);
    return accumulator.concat(
        currentValue.nodeType === Node.ELEMENT_NODE ? 
        steamrollNodes(currentValue) 
        : currentValue
    );
} -->