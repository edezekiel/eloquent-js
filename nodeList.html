<!DOCTYPE html>
<html>
    
    <body>
        <div>
            <h1>Heading with a <span>span</span> element.</h1>
            <p>A paragraph with <span>one</span>, <span>two</span>
              spans.</p>
        </div>

          <script>
            const byTagName = (node, tagName) => {
                const nodes = node.childNodes;
                const nodesArray = Array.from(nodes);
                console.log(nodesArray)
                nodesArray.forEach(node => console.log(`node = ${node}, children = ${node.childNodes}`))
                let results = nodesArray.filter(node => node.nodeName === tagName.toUpperCase());
                return results;
            }
                
            //console.log(byTagName(document.body, "h1"))
    
            const flattenArray = (arr) => arr.reduce(flatReducer, []);

            const flatReducer = (accumulator, currentValue) => {
                return accumulator.concat(
                    (currentValue.nodeType === Node.ELEMENT_NODE  && (!!currentValue.childNodes)) ? 
                    [].concat(currentValue).concat(flattenArray(Array.from(currentValue.childNodes)))
                    : currentValue
                )

            }
            
            let initialArray = Array.from(document.body.firstElementChild.childNodes);
            console.log("initial array = ", initialArray);  
            console.log("flattened = ", flattenArray(initialArray))
    
        </script>
    </body>

   
</html>



<!-- Steamroller approach to flatteing nested array -->
<!-- const steamrollNodes = node => {
    let nodeArray = node;
    if (!Array.isArray(node)){
        nodeArray = Array.from(node.childNodes);
    }
    return nodeArray.reduce(flatReducer, []);
}

function flatReducer (accumulator, currentValue) {
    console.log(`currentValue = ${currentValue}, currentValue.childNodes = ${currentValue.childNodes}, length = ${currentValue.childNodes.length}`);
    //console.log(accumulator, Array.isArray(Array.from(currentValue.childNodes)), currentValue);
    return accumulator.concat(
        currentValue.nodeType === Node.ELEMENT_NODE ? 
        steamrollNodes(currentValue) 
        : currentValue
    );
} -->